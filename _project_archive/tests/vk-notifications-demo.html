<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VK Mini App - –î–µ–º–æ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .demo-container {
            background: white;
            border-radius: 16px;
            padding: 32px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            text-align: center;
        }

        .demo-title {
            font-size: 28px;
            font-weight: 700;
            color: #333;
            margin-bottom: 16px;
        }

        .demo-description {
            font-size: 16px;
            color: #666;
            margin-bottom: 32px;
            line-height: 1.5;
        }

        .demo-buttons {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .demo-btn {
            padding: 16px 24px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .demo-btn-primary {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
        }

        .demo-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 123, 255, 0.4);
        }

        .demo-btn-secondary {
            background: transparent;
            color: #666;
            border: 2px solid #e0e0e0;
        }

        .demo-btn-secondary:hover {
            background: #f8f9fa;
            border-color: #d0d0d0;
        }

        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 16px;
            margin: 20px 0;
            text-align: left;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
        }

        .status-indicator {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            margin: 10px 0;
        }

        .status-success {
            background: #d4edda;
            color: #155724;
        }

        .status-error {
            background: #f8d7da;
            color: #721c24;
        }

        .status-info {
            background: #d1ecf1;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <h1 class="demo-title">üîî VK Mini App</h1>
        <p class="demo-title">–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</p>
        
        <p class="demo-description">
            –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è 
            –¥–ª—è VK Mini App —Å —É—á–µ—Ç–æ–º –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤.
        </p>

        <div id="status-container">
            <div class="status-indicator status-info">
                ‚è≥ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...
            </div>
        </div>

        <div class="demo-buttons">
            <button class="demo-btn demo-btn-primary" onclick="initNotifications()">
                üîî –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
            </button>
            
            <button class="demo-btn demo-btn-secondary" onclick="checkStatus()">
                üìä –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏
            </button>
            
            <button class="demo-btn demo-btn-secondary" onclick="requestPermission()">
                üîî –ó–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
            </button>
            
            <button class="demo-btn demo-btn-secondary" onclick="showTestToast()">
                üì± –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            </button>
        </div>

        <div class="code-block">
            <strong>–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:</strong><br>
            <code>
                // –ò–º–ø–æ—Ä—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏<br>
                import bridge from '@vkontakte/vk-bridge';<br><br>
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ<br>
                document.addEventListener('DOMContentLoaded', () => {<br>
                &nbsp;&nbsp;initVKNotifications();<br>
                });
            </code>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º VK Bridge (–¥–ª—è –¥–µ–º–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–æ–∫) -->
    <script>
        // –ú–æ–∫ VK Bridge –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
        window.bridge = {
            send: async (method, params = {}) => {
                console.log(`üîî VK Bridge: ${method}`, params);
                
                // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ —Å–µ—Ç–∏
                await new Promise(resolve => setTimeout(resolve, 500));
                
                switch (method) {
                    case 'VKWebAppGetUserInfo':
                        return {
                            id: 123456789,
                            first_name: '–ò–≤–∞–Ω',
                            last_name: '–ü–µ—Ç—Ä–æ–≤'
                        };
                    
                    case 'VKWebAppCheckAllowedNotifications':
                        // –°–ª—É—á–∞–π–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–∞–∑–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è –¥–µ–º–æ
                        return {
                            result: Math.random() > 0.5
                        };
                    
                    case 'VKWebAppAllowNotifications':
                        // –ò–º–∏—Ç–∏—Ä—É–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤—ã–±–æ—Ä
                        const userChoice = confirm('–†–∞–∑—Ä–µ—à–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π?');
                        return {
                            result: userChoice
                        };
                    
                    default:
                        throw new Error('–ú–µ—Ç–æ–¥ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è');
                }
            }
        };
    </script>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –Ω–∞—à—É —Å–∏—Å—Ç–µ–º—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
    <script type="module">
        // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ import)
        const { initVKNotifications, requestNotificationPermission, showToast } = await import('./vk-notifications-simple.js');

        // –î–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –¥–ª—è –¥–µ–º–æ
        window.initNotifications = async () => {
            updateStatus('‚è≥ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã...', 'info');
            try {
                await initVKNotifications();
                updateStatus('‚úÖ –°–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞', 'success');
            } catch (error) {
                updateStatus('‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏', 'error');
            }
        };

        window.checkStatus = async () => {
            updateStatus('üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å...', 'info');
            try {
                const result = await bridge.send('VKWebAppCheckAllowedNotifications');
                if (result.result) {
                    updateStatus('‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω—ã', 'success');
                } else {
                    updateStatus('‚ùå –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∑–∞–ø—Ä–µ—â–µ–Ω—ã', 'error');
                }
            } catch (error) {
                updateStatus('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å', 'error');
            }
        };

        window.requestPermission = async () => {
            updateStatus('üîî –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ...', 'info');
            try {
                await requestNotificationPermission('–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–¥–ø–∏—Å–∫—É!', '–í—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –ø–æ–∑–∂–µ');
                updateStatus('‚úÖ –ó–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω–µ–Ω', 'success');
            } catch (error) {
                updateStatus('‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞', 'error');
            }
        };

        window.showTestToast = () => {
            showToast('–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ!', 'success');
        };

        function updateStatus(message, type) {
            const container = document.getElementById('status-container');
            const colors = {
                success: 'status-success',
                error: 'status-error',
                info: 'status-info'
            };
            
            container.innerHTML = `<div class="status-indicator ${colors[type]}">${message}</div>`;
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', () => {
            updateStatus('üöÄ –î–µ–º–æ –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ', 'info');
        });
    </script>
</body>
</html>



