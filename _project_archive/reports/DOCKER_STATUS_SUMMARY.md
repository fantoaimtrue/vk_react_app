# üìä –°–¢–ê–¢–£–° DOCKER –ö–û–ù–¢–ï–ô–ù–ï–†–û–í

**–î–∞—Ç–∞**: 8 –Ω–æ—è–±—Ä—è 2025  
**–í—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏**: –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

---

## ‚úÖ –°–¢–ê–¢–£–° –ö–û–ù–¢–ï–ô–ù–ï–†–û–í

### –†–∞–±–æ—Ç–∞—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã:

| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä | –°—Ç–∞—Ç—É—Å | –ü–æ—Ä—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|--------|------|----------|
| `babkimanki_backend_1` | ‚úÖ Up | 8000 | Django + Gunicorn |
| `babkimanki_db_1` | ‚úÖ Up | 5432 | PostgreSQL |
| `babkimanki_frontend_1` | ‚úÖ Up | 80, 443 | Nginx (production) |

### –ù–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ:

| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|--------|----------|
| `babkimanki_certbot_1` | ‚ö†Ô∏è Exit 1 | Certbot (–æ–¥–Ω–æ—Ä–∞–∑–æ–≤–∞—è –∑–∞–¥–∞—á–∞) |

---

## üîç –ß–¢–û –ü–†–û–í–ï–†–ï–ù–û

### ‚úÖ Backend:
- ‚úÖ Gunicorn –∑–∞–ø—É—â–µ–Ω
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- ‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã —Å–æ–±—Ä–∞–Ω—ã
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 8000

### ‚úÖ Database:
- ‚úÖ PostgreSQL —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü–æ—Ä—Ç 5432 –æ—Ç–∫—Ä—ã—Ç
- ‚úÖ –î–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã

### ‚úÖ Frontend:
- ‚úÖ Nginx –∑–∞–ø—É—â–µ–Ω –≤ production —Ä–µ–∂–∏–º–µ
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞
- ‚úÖ –ü–æ—Ä—Ç 80 –∏ 443 –æ—Ç–∫—Ä—ã—Ç—ã
- ‚úÖ –†–µ–¥–∏—Ä–µ–∫—Ç HTTP ‚Üí HTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚ö†Ô∏è Certbot:
- ‚ö†Ô∏è –ó–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)
- ‚ö†Ô∏è –≠—Ç–æ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- ‚ö†Ô∏è –ï—Å–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —É–∂–µ –µ—Å—Ç—å, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### API:
```bash
# –ß–µ—Ä–µ–∑ HTTPS (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–±)
curl -skL https://bodyexp.ru/api/mfos/
# ‚úÖ –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å JSON —Å 15 –ú–§–û

# –ß–µ—Ä–µ–∑ HTTP (—Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ HTTPS)
curl -sL http://bodyexp.ru/api/mfos/
# ‚úÖ –†–µ–¥–∏—Ä–µ–∫—Ç 301 –Ω–∞ HTTPS
```

### Frontend:
```bash
# –ß–µ—Ä–µ–∑ HTTPS
curl -skL https://bodyexp.ru/
# ‚úÖ –î–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å—Å—è HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞

# –ß–µ—Ä–µ–∑ HTTP (—Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ HTTPS)
curl -sL http://bodyexp.ru/
# ‚úÖ –†–µ–¥–∏—Ä–µ–∫—Ç 301 –Ω–∞ HTTPS
```

---

## üîß –ï–°–õ–ò –ß–¢–û-–¢–û –ù–ï –†–ê–ë–û–¢–ê–ï–¢

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:
```bash
docker-compose -f docker-compose.yml -f docker-compose.prod.yml ps
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
```bash
# –í—Å–µ –ª–æ–≥–∏
docker-compose -f docker-compose.yml -f docker-compose.prod.yml logs

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
docker-compose -f docker-compose.yml -f docker-compose.prod.yml logs backend
docker-compose -f docker-compose.yml -f docker-compose.prod.yml logs frontend
docker-compose -f docker-compose.yml -f docker-compose.prod.yml logs db
```

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
# –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose -f docker-compose.yml -f docker-compose.prod.yml restart

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
docker-compose -f docker-compose.yml -f docker-compose.prod.yml restart frontend
```

### 4. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ:
```bash
# Frontend
docker-compose -f docker-compose.yml -f docker-compose.prod.yml build frontend
docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d frontend

# Backend
docker-compose -f docker-compose.yml -f docker-compose.prod.yml build backend
docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d backend
```

---

## üìù –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

### HTTP ‚Üí HTTPS —Ä–µ–¥–∏—Ä–µ–∫—Ç:
- ‚úÖ –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - nginx –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç HTTP –Ω–∞ HTTPS
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ API –∏ frontend
- ‚úÖ –≠—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ `nginx-ssl-with-backend.conf`

### Certbot –æ—à–∏–±–∫–∞:
- ‚ö†Ô∏è –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, –µ—Å–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —É–∂–µ –ø–æ–ª—É—á–µ–Ω—ã
- ‚ö†Ô∏è Certbot - —ç—Ç–æ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- ‚ö†Ô∏è –ï—Å–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –µ—Å—Ç—å, –º–æ–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —ç—Ç—É –æ—à–∏–±–∫—É

### Database –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:
- ‚ö†Ô∏è –û—à–∏–±–∫–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `postgres` –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã
- ‚úÖ –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `babkimanki_user`
- ‚úÖ Backend –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ë–î –Ω–æ—Ä–º–∞–ª—å–Ω–æ

---

## üéØ –ò–¢–û–ì–û–í–´–ô –°–¢–ê–¢–£–°

### ‚úÖ –í–°–Å –†–ê–ë–û–¢–ê–ï–¢:

- ‚úÖ **Backend**: Gunicorn –∑–∞–ø—É—â–µ–Ω, API –¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ **Database**: PostgreSQL —Ä–∞–±–æ—Ç–∞–µ—Ç, –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã
- ‚úÖ **Frontend**: Nginx —Ä–∞–±–æ—Ç–∞–µ—Ç, —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–æ—Å—Ç—É–ø–Ω—ã
- ‚úÖ **SSL**: HTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç, —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω

### ‚ö†Ô∏è –ù–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

- ‚ö†Ô∏è Certbot –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)
- ‚ö†Ô∏è –û—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è `postgres` (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

---

**–î–∞—Ç–∞**: 8 –Ω–æ—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç

